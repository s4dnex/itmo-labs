# Лабораторная работа №4

> Вариант: **283772**

## Задание:

По варианту, выданному преподавателем, составить и выполнить запросы к базе данных "Учебный процесс".

Команда для подключения к базе данных ucheb:
```
psql -h pg -d ucheb
```

Составить запросы на языке SQL (пункты 1-2).

Для каждого запроса предложить индексы, добавление которых уменьшит время выполнения запроса (указать таблицы/атрибуты, для которых нужно добавить индексы, написать тип индекса; объяснить, почему добавление индекса будет полезным для данного запроса).

Для запросов 1-2 необходимо составить возможные планы выполнения запросов. Планы составляются на основании предположения, что в таблицах отсутствуют индексы. Из составленных планов необходимо выбрать оптимальный и объяснить свой выбор.
Изменятся ли планы при добавлении индекса и как?

Для запросов 1-2 необходимо добавить в отчет вывод команды EXPLAIN ANALYZE [запрос]

Подробные ответы на все вышеперечисленные вопросы должны присутствовать в отчете (планы выполнения запросов должны быть нарисованы, ответы на вопросы - представлены в текстовом виде).

1. Сделать запрос для получения атрибутов из указанных таблиц, применив фильтры по указанным условиям:
   
    **Таблицы**: Н_ОЦЕНКИ, Н_ВЕДОМОСТИ.
   
    **Вывести атрибуты**: Н_ОЦЕНКИ.КОД, Н_ВЕДОМОСТИ.ЧЛВК_ИД.
    
    **Фильтры (AND)**:
    - Н_ОЦЕНКИ.КОД < зачет.
    - Н_ВЕДОМОСТИ.ДАТА < 2022-06-08.

    **Вид соединения**: RIGHT JOIN.

2. Сделать запрос для получения атрибутов из указанных таблиц, применив фильтры по указанным условиям:
    **Таблицы**: Н_ЛЮДИ, Н_ВЕДОМОСТИ, Н_СЕССИЯ.
    
    **Вывести атрибуты**: Н_ЛЮДИ.ФАМИЛИЯ, Н_ВЕДОМОСТИ.ИД, Н_СЕССИЯ.ДАТА.
    
    **Фильтры (AND)**:
    - Н_ЛЮДИ.ИМЯ = Владимир.
    - Н_ВЕДОМОСТИ.ДАТА < 1998-01-05.
    - Н_СЕССИЯ.ДАТА > 2004-01-17.
    
    **Вид соединения**: RIGHT JOIN.

## Отчёт по работе должен содержать:
1. Текст задания.
2. Реализацию запросов на SQL.
3. Планы выполнения запросов.
4. Ответы на вопросы, представленные в задании.
5. Выводы по работе.

## Темы для подготовки к защите лабораторной работы:
1. Индексы.
2. Оптимизация запросов.
3. Выбор плана выполнения запросов.