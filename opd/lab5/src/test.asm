START:
    CALL $DIV32_BY_10
    LD $DIV32_QUOT
    HLT
    LD $DIV32_REM
    HLT

DIV32_NUM_LOW: WORD 0x100
DIV32_NUM_HIGH: WORD 0x0
DIV32_QUOT: WORD 0x0
DIV32_REM: WORD 0x0
DIV32_BY_10:
    CLA
    ST $DIV32_REM
    ST $DIV32_QUOT
    DIV32_LOOP_DIV:
        LD DIV32_NUM_HIGH
        CMP #0
        BZS DIV32_CHECK_LOW
        BGE DIV32_SUB

        DIV32_CHECK_LOW:
            LD DIV32_NUM_LOW
            CMP #10
            BLT DIV32_RETURN

    DIV32_SUB:
        LD $DIV32_NUM_LOW
        ST $SUB32_A_LOW
        LD $DIV32_NUM_HIGH
        ST $SUB32_A_HIGH
        LD #10
        ST $SUB32_B_LOW
        CLA
        ST $SUB32_B_HIGH
        CALL $SUB32
        LD $SUB32_RES_LOW
        ST $DIV32_NUM_LOW
        LD $SUB32_RES_HIGH
        ST $DIV32_NUM_HIGH
        LD $DIV32_QUOT
        INC
        ST $DIV32_QUOT
        JUMP DIV32_LOOP_DIV

    DIV32_RETURN:
        LD $DIV32_NUM_LOW
        ST $DIV32_REM
        RET

ADD32_A_LOW: WORD ?
ADD32_A_HIGH: WORD ?
ADD32_B_LOW: WORD ?
ADD32_B_HIGH: WORD ?
ADD32_RES_LOW: WORD ?
ADD32_RES_HIGH: WORD ?
ADD32: ; void (int32) add32(int16 a_low, int16 a_high, int16 b_low, int16 b_high)
    LD ADD32_A_LOW
    ADD ADD32_B_LOW
    ST ADD32_RES_LOW
    LD ADD32_A_HIGH
    ADC ADD32_B_HIGH
    ST ADD32_RES_HIGH
    RET

NEG32_NUM_LOW: WORD ?
NEG32_NUM_HIGH: WORD ?
NEG32_RES_LOW: WORD ?
NEG32_RES_HIGH: WORD ?
NEG32: ; void (int32) neg32(int16 num_low, int16 num_high)
    LD NEG32_NUM_LOW
    NOT
    ST $ADD32_A_LOW
    LD NEG32_NUM_HIGH
    NOT
    ST $ADD32_A_HIGH
    LD #1
    ST $ADD32_B_LOW
    CLA
    ST $ADD32_B_HIGH
    CALL $ADD32
    LD $ADD32_RES_LOW
    ST NEG32_RES_LOW
    LD $ADD32_RES_HIGH
    ST NEG32_RES_HIGH
    RET

SUB32_A_LOW: WORD ?
SUB32_A_HIGH: WORD ?
SUB32_B_LOW: WORD ?
SUB32_B_HIGH: WORD ?
SUB32_RES_LOW: WORD ?
SUB32_RES_HIGH: WORD ?
SUB32: ; void (int32) sub32(int16 a_low, int16 a_high, int16 b_low, int16 b_high)
    LD SUB32_B_LOW
    ST $NEG32_NUM_LOW
    LD SUB32_B_HIGH
    ST $NEG32_NUM_HIGH
    CALL $NEG32
    LD $NEG32_RES_LOW
    ST $ADD32_B_LOW
    LD $NEG32_RES_HIGH
    ST $ADD32_B_HIGH
    LD SUB32_A_LOW
    ST $ADD32_A_LOW
    LD SUB32_A_HIGH
    ST $ADD32_A_HIGH
    CALL $ADD32
    LD $ADD32_RES_LOW
    ST SUB32_RES_LOW
    LD $ADD32_RES_HIGH
    ST SUB32_RES_HIGH
    RET